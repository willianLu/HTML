/**
 * Copyright (c) Tiny Technologies, Inc. All rights reserved.
 * Licensed under the LGPL or a commercial license.
 * For LGPL see License.txt in the project root for license information.
 * For commercial licenses see https://www.tiny.cloud/
 *
 * Version: 5.0.6 (2019-05-22)
 */
(function() {
  var preview = (function() {
    "use strict";

    var global = tinymce.util.Tools.resolve("tinymce.PluginManager");

    var open = function(editor) {
      return editor.windowManager.open({
        title: "这里是弹窗标题",
        body: {
          type: "panel",
          items: [
            {
              name: "url",
              type: "urlinput",
              filetype: "file",
              label: "URL"
            },
            {
              name: "text",
              type: "input",
              label: "Text to display"
            }
          ]
        },
        buttons: [
          {
            type: "cancel",
            text: "Close"
          },
          {
            type: "submit",
            text: "Save",
            primary: true
          }
        ],
        onSubmit: function(api) {
          var data = api.getData();
          // 将输入框内容插入到内容区光标位置
          editor.insertContent(
            editor.dom.createHTML(
              "a",
              { href: data.src.value },
              editor.dom.encode(data.src.meta.text)
            )
          );
          api.close();
        }
      });
    };

    var register = function(editor) {
      editor.addCommand("example", function() {
        open(editor);
      });
    };
    var Commands = { register: register };

    var register$1 = function(editor) {
      editor.ui.registry.addButton("example", {
        text: "上传文件",
        // icon: "example",
        // tooltip: "example",
        onAction: function() {
          return editor.execCommand("example");
        }
      });
    };
    var Buttons = { register: register$1 };

    global.add("example", function(editor) {
      Commands.register(editor);
      Buttons.register(editor);
    });
    function Plugin() {}

    return Plugin;
  })();
})();
