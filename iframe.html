<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <title>iframe</title>
        <style>
            html,body {
                margin: 0;
                padding: 0;
                width: 100%;
                height: 100%;
            }
            #app {
                width: 100%;
                height: 100%;
                border: 0;
            }
        </style>
    </head>

    <body>
        <button onclick="toPage()">跳转链接</button>
        <iframe id="app" name="appPage" src="http://127.0.0.1:8080/"></iframe>
        <script>
            const app = document.getElementById("app");
            console.log(app, "-------------------------kkkm")
            // 注意：必须是在框架内容加载完成后才能触发 message 事件哦
            app.onload =  function(){
                const data = {
                    act: 'article',  // 自定义的消息类型、行为，用于switch条件判断等。。
                    msg: {
                        subject: '跨域通信消息收到了有木有~', 
                        author: 'CSDN-神神的蜗牛'
                    }
                };
                // 不限制域名则填写 * 星号, 否则请填写对应域名如 http://www.b.com
                app.contentWindow.postMessage(data, '*');
            };
            window.addEventListener('message', function(e) {
               console.log(e, "------------------------父窗口--接受到数据")
            }, false);
        </script>
    </body>
</html>
